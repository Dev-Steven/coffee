{"ast":null,"code":"import { ADD_TO_CART } from './types';\nimport coffees from '../apis/coffees';\nimport _ from 'lodash';\nexport const addToCart = id => async dispatch => {\n  const responseCart = await coffees.get('/cart');\n  const cart = responseCart.data;\n  const responseCoffees = await coffees.get('/coffees');\n  const selectedCoffee = responseCoffees.data.find(coffee => coffee.id === id);\n\n  if (cart.items.length > 0) {\n    let itemExist = cart.items.find(item => item.id === id);\n  } // deep copy to add new property quantity, will eventually add into items array in cart :)\n\n\n  let coffeeToAdd = _.cloneDeep(selectedCoffee);\n\n  let newVals = {};\n\n  if (itemExist) {\n    // item already in cart...\n    // increase quantity property by one\n    itemExist.quantity += 1; // increase total\n\n    let newTotal = itemExist.price + cart.price;\n    newVals = {\n      [itemExist.id]: itemExist,\n      total: newTotal\n    };\n  } else {\n    // add item to cart...\n    // create new quantity property\n    coffeeToAdd.quantity = 1; // add to total\n\n    let newTotal = coffeeToAdd.price + cart.price;\n    newVals = {\n      [itemExist.id]: itemExist,\n      total: newTotal\n    };\n  }\n\n  const response = await coffees.post('/cart', {\n    id,\n    ...newVals\n  });\n  console.log('hello?', response);\n  dispatch({\n    type: ADD_TO_CART // payload: { id, cart, selectedCoffee, itemExist },\n\n  });\n};","map":{"version":3,"sources":["/Users/stevenchung/Documents/react/coffee/client/src/actions/cartActions.js"],"names":["ADD_TO_CART","coffees","_","addToCart","id","dispatch","responseCart","get","cart","data","responseCoffees","selectedCoffee","find","coffee","items","length","itemExist","item","coffeeToAdd","cloneDeep","newVals","quantity","newTotal","price","total","response","post","console","log","type"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,OAAO,MAAMC,SAAS,GAAGC,EAAE,IAAI,MAAMC,QAAN,IAAkB;AAChD,QAAMC,YAAY,GAAG,MAAML,OAAO,CAACM,GAAR,CAAY,OAAZ,CAA3B;AACA,QAAMC,IAAI,GAAGF,YAAY,CAACG,IAA1B;AAEA,QAAMC,eAAe,GAAG,MAAMT,OAAO,CAACM,GAAR,CAAY,UAAZ,CAA9B;AACA,QAAMI,cAAc,GAAGD,eAAe,CAACD,IAAhB,CAAqBG,IAArB,CACtBC,MAAM,IAAIA,MAAM,CAACT,EAAP,KAAcA,EADF,CAAvB;;AAIA,MAAII,IAAI,CAACM,KAAL,CAAWC,MAAX,GAAoB,CAAxB,EAA2B;AAC1B,QAAIC,SAAS,GAAGR,IAAI,CAACM,KAAL,CAAWF,IAAX,CAAgBK,IAAI,IAAIA,IAAI,CAACb,EAAL,KAAYA,EAApC,CAAhB;AACA,GAX+C,CAahD;;;AACA,MAAIc,WAAW,GAAGhB,CAAC,CAACiB,SAAF,CAAYR,cAAZ,CAAlB;;AAEA,MAAIS,OAAO,GAAG,EAAd;;AAEA,MAAIJ,SAAJ,EAAe;AACd;AACA;AACAA,IAAAA,SAAS,CAACK,QAAV,IAAsB,CAAtB,CAHc,CAId;;AACA,QAAIC,QAAQ,GAAGN,SAAS,CAACO,KAAV,GAAkBf,IAAI,CAACe,KAAtC;AAEAH,IAAAA,OAAO,GAAG;AAAE,OAACJ,SAAS,CAACZ,EAAX,GAAgBY,SAAlB;AAA6BQ,MAAAA,KAAK,EAAEF;AAApC,KAAV;AACA,GARD,MAQO;AACN;AACA;AACAJ,IAAAA,WAAW,CAACG,QAAZ,GAAuB,CAAvB,CAHM,CAIN;;AACA,QAAIC,QAAQ,GAAGJ,WAAW,CAACK,KAAZ,GAAoBf,IAAI,CAACe,KAAxC;AAEAH,IAAAA,OAAO,GAAG;AAAE,OAACJ,SAAS,CAACZ,EAAX,GAAgBY,SAAlB;AAA6BQ,MAAAA,KAAK,EAAEF;AAApC,KAAV;AACA;;AAED,QAAMG,QAAQ,GAAG,MAAMxB,OAAO,CAACyB,IAAR,CAAa,OAAb,EAAsB;AAAEtB,IAAAA,EAAF;AAAM,OAAGgB;AAAT,GAAtB,CAAvB;AAEAO,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBH,QAAtB;AAEApB,EAAAA,QAAQ,CAAC;AACRwB,IAAAA,IAAI,EAAE7B,WADE,CAER;;AAFQ,GAAD,CAAR;AAIA,CA5CM","sourcesContent":["import { ADD_TO_CART } from './types';\nimport coffees from '../apis/coffees';\nimport _ from 'lodash';\n\nexport const addToCart = id => async dispatch => {\n\tconst responseCart = await coffees.get('/cart');\n\tconst cart = responseCart.data;\n\n\tconst responseCoffees = await coffees.get('/coffees');\n\tconst selectedCoffee = responseCoffees.data.find(\n\t\tcoffee => coffee.id === id\n\t);\n\n\tif (cart.items.length > 0) {\n\t\tlet itemExist = cart.items.find(item => item.id === id);\n\t}\n\n\t// deep copy to add new property quantity, will eventually add into items array in cart :)\n\tlet coffeeToAdd = _.cloneDeep(selectedCoffee);\n\n\tlet newVals = {};\n\n\tif (itemExist) {\n\t\t// item already in cart...\n\t\t// increase quantity property by one\n\t\titemExist.quantity += 1;\n\t\t// increase total\n\t\tlet newTotal = itemExist.price + cart.price;\n\n\t\tnewVals = { [itemExist.id]: itemExist, total: newTotal };\n\t} else {\n\t\t// add item to cart...\n\t\t// create new quantity property\n\t\tcoffeeToAdd.quantity = 1;\n\t\t// add to total\n\t\tlet newTotal = coffeeToAdd.price + cart.price;\n\n\t\tnewVals = { [itemExist.id]: itemExist, total: newTotal };\n\t}\n\n\tconst response = await coffees.post('/cart', { id, ...newVals });\n\n\tconsole.log('hello?', response);\n\n\tdispatch({\n\t\ttype: ADD_TO_CART,\n\t\t// payload: { id, cart, selectedCoffee, itemExist },\n\t});\n};\n"]},"metadata":{},"sourceType":"module"}