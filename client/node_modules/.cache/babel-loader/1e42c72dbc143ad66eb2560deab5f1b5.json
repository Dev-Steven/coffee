{"ast":null,"code":"import coffees from '../apis/coffees';\nimport { ADD_TO_CART } from '../actions/types';\nimport _ from 'lodash';\nexport default (async (state = {}, action) => {\n  switch (action.type) {\n    case ADD_TO_CART:\n      let selectedCoffee = await coffees.get(`/coffees?id=${action.payload.id}`);\n      console.log('selectedCoffee: ', selectedCoffee.data[0]);\n      let cartArray = await coffees.get(`/cart?id=${action.payload.id}`);\n\n      let coffeeToAdd = _.cloneDeep(selectedCoffee.data[0]);\n\n      let itemInCart = cartArray.data[0]; // if item in cart, update quantity and total price\n\n      if (itemInCart && itemInCart.id === action.payload.id) {\n        console.log('item in cart'); // take state (empty obj) and copy everything from responseData into state\n        // then add the addedCoffee into there\n      } // otherwise, add new item to cart\n      else {\n          console.log('item not in cart'); // create quantity property where quantity = 1\n\n          coffeeToAdd.quantity = 1;\n          console.log('coffeeToAdd: ', coffeeToAdd); // add to total price\n\n          let newTotal = coffeeToAdd.price + action.payload.responseData[0].total;\n          console.log('newTotal: ', newTotal); // update db.json file\n\n          return { ...state,\n            // total: newTotal\n            total: newTotal,\n            // add new object coffeeToAdd\n            coffeeToAdd\n          };\n        }\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/Users/stevenchung/Documents/react/coffee/client/src/reducers/cartReducer.js"],"names":["coffees","ADD_TO_CART","_","state","action","type","selectedCoffee","get","payload","id","console","log","data","cartArray","coffeeToAdd","cloneDeep","itemInCart","quantity","newTotal","price","responseData","total"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,iBAApB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,gBAAe,OAAOC,KAAK,GAAG,EAAf,EAAmBC,MAAnB,KAA8B;AAC5C,UAAQA,MAAM,CAACC,IAAf;AACC,SAAKJ,WAAL;AACC,UAAIK,cAAc,GAAG,MAAMN,OAAO,CAACO,GAAR,CACzB,eAAcH,MAAM,CAACI,OAAP,CAAeC,EAAG,EADP,CAA3B;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCL,cAAc,CAACM,IAAf,CAAoB,CAApB,CAAhC;AAEA,UAAIC,SAAS,GAAG,MAAMb,OAAO,CAACO,GAAR,CAAa,YAAWH,MAAM,CAACI,OAAP,CAAeC,EAAG,EAA1C,CAAtB;;AAEA,UAAIK,WAAW,GAAGZ,CAAC,CAACa,SAAF,CAAYT,cAAc,CAACM,IAAf,CAAoB,CAApB,CAAZ,CAAlB;;AAEA,UAAII,UAAU,GAAGH,SAAS,CAACD,IAAV,CAAe,CAAf,CAAjB,CAVD,CAYC;;AACA,UAAII,UAAU,IAAIA,UAAU,CAACP,EAAX,KAAkBL,MAAM,CAACI,OAAP,CAAeC,EAAnD,EAAuD;AACtDC,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EADsD,CAEtD;AACA;AACA,OAJD,CAKA;AALA,WAMK;AACJD,UAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EADI,CAGJ;;AACAG,UAAAA,WAAW,CAACG,QAAZ,GAAuB,CAAvB;AACAP,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BG,WAA7B,EALI,CAOJ;;AACA,cAAII,QAAQ,GACXJ,WAAW,CAACK,KAAZ,GAAoBf,MAAM,CAACI,OAAP,CAAeY,YAAf,CAA4B,CAA5B,EAA+BC,KADpD;AAEAX,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BO,QAA1B,EAVI,CAYJ;;AACA,iBAAO,EACN,GAAGf,KADG;AAEN;AACAkB,YAAAA,KAAK,EAAEH,QAHD;AAIN;AACAJ,YAAAA;AALM,WAAP;AAOA;;AACF;AACC,aAAOX,KAAP;AA1CF;AA4CA,CA7CD","sourcesContent":["import coffees from '../apis/coffees';\nimport { ADD_TO_CART } from '../actions/types';\nimport _ from 'lodash';\n\nexport default async (state = {}, action) => {\n\tswitch (action.type) {\n\t\tcase ADD_TO_CART:\n\t\t\tlet selectedCoffee = await coffees.get(\n\t\t\t\t`/coffees?id=${action.payload.id}`\n\t\t\t);\n\t\t\tconsole.log('selectedCoffee: ', selectedCoffee.data[0]);\n\n\t\t\tlet cartArray = await coffees.get(`/cart?id=${action.payload.id}`);\n\n\t\t\tlet coffeeToAdd = _.cloneDeep(selectedCoffee.data[0]);\n\n\t\t\tlet itemInCart = cartArray.data[0];\n\n\t\t\t// if item in cart, update quantity and total price\n\t\t\tif (itemInCart && itemInCart.id === action.payload.id) {\n\t\t\t\tconsole.log('item in cart');\n\t\t\t\t// take state (empty obj) and copy everything from responseData into state\n\t\t\t\t// then add the addedCoffee into there\n\t\t\t}\n\t\t\t// otherwise, add new item to cart\n\t\t\telse {\n\t\t\t\tconsole.log('item not in cart');\n\n\t\t\t\t// create quantity property where quantity = 1\n\t\t\t\tcoffeeToAdd.quantity = 1;\n\t\t\t\tconsole.log('coffeeToAdd: ', coffeeToAdd);\n\n\t\t\t\t// add to total price\n\t\t\t\tlet newTotal =\n\t\t\t\t\tcoffeeToAdd.price + action.payload.responseData[0].total;\n\t\t\t\tconsole.log('newTotal: ', newTotal);\n\n\t\t\t\t// update db.json file\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t// total: newTotal\n\t\t\t\t\ttotal: newTotal,\n\t\t\t\t\t// add new object coffeeToAdd\n\t\t\t\t\tcoffeeToAdd,\n\t\t\t\t};\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n"]},"metadata":{},"sourceType":"module"}